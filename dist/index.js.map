{"version":3,"file":"index.js","sources":["../index.js"],"sourcesContent":["import { createRequireFromPath as createRequire } from \"module\";\nimport ejs from \"ejs\";\nimport ejsLint from \"ejs-lint\";\nimport caller from \"caller\";\nimport { file, resolve } from \"@chriscalo/file\";\n\n\nexport function render(templatePath, data) {\n  const absolutePath = resolve(templatePath, caller());\n  const templateContent = file(absolutePath);\n  \n  try {\n    return ejs.render(templateContent, {\n      ...data,\n      require: createRequire(absolutePath),\n      include: createInclude(absolutePath, data),\n    });\n  } catch (error) {\n    console.error(error);\n    console.error(ejsLint(templateContent));\n  }\n}\n\nfunction createInclude(parentPath, data) {\n  return function (includePath, includeData) {\n    const templatePath = resolve(includePath, parentPath);\n    \n    return render(templatePath, {\n      ...data,\n      ...includeData,\n    });\n  };\n}\n"],"names":["render","templatePath","data","absolutePath","resolve","caller","templateContent","file","ejs","require","createRequire","include","createInclude","error","console","ejsLint","parentPath","includePath","includeData"],"mappings":";;;;;;;;AAOO,SAASA,MAAT,CAAgBC,YAAhB,EAA8BC,IAA9B,EAAoC;MACnCC,YAAY,GAAGC,YAAO,CAACH,YAAD,EAAeI,MAAM,EAArB,CAA5B;MACMC,eAAe,GAAGC,SAAI,CAACJ,YAAD,CAA5B;;MAEI;WACKK,GAAG,CAACR,MAAJ,CAAWM,eAAX,EAA4B,kBAC9BJ,IAD8B;OAEjCO,OAAO,EAAEC,8BAAa,CAACP,YAAD,CAFW;MAGjCQ,OAAO,EAAEC,aAAa,CAACT,YAAD,EAAeD,IAAf,GAHjB,CAAP;GADF,CAME,OAAOW,KAAP,EAAc;IACdC,OAAO,CAACD,KAAR,CAAcA,KAAd;IACAC,OAAO,CAACD,KAAR,CAAcE,OAAO,CAACT,eAAD,CAArB;;;;AAIJ,SAASM,aAAT,CAAuBI,UAAvB,EAAmCd,IAAnC,EAAyC;SAChC,UAAUe,WAAV,EAAuBC,WAAvB,EAAoC;QACnCjB,YAAY,GAAGG,YAAO,CAACa,WAAD,EAAcD,UAAd,CAA5B;WAEOhB,MAAM,CAACC,YAAD,EAAe,kBACvBC,IADuB;kBAAf,CAAb;GAHF;;;;;"}